{{ define "main" }}
<!-- スクロールで暗くなるオーバーレイ -->
<div class="darkness-overlay"></div>

<!-- 背景エフェクト（固定） -->
<div class="bg-effects">
  <div class="shape shape-1"></div>
  <div class="shape shape-2"></div>
  <div class="shape shape-3"></div>
  <canvas id="particles-canvas" role="img" aria-label="Decorative particle animation"></canvas>
</div>

<!-- ファーストビュー -->
<div class="hero">
  <div class="observatory">
    <div class="obs-time-block">
      <div class="obs-date" id="obs-date"></div>
      <div class="obs-time" id="current-time"></div>
    </div>
    <div class="obs-divider"></div>
    <div class="obs-moon-block">
      <canvas id="moon-canvas" width="140" height="140" role="img" aria-label="Current moon phase visualization"></canvas>
      <div class="obs-moon-info">
        <div class="obs-moon-phase" id="moon-phase"></div>
        <div class="obs-moon-age" id="moon-age"></div>
      </div>
    </div>
  </div>
  <div class="hero-intro">
    <p class="hero-tagline">技術ネタから趣味まで、雑多に書き残す備忘録</p>
    <p class="hero-stack">Go / Observability / Camera</p>
  </div>
  <div class="scroll-hint">
    <span class="scroll-hint-text">Scroll</span>
    <svg class="scroll-hint-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M12 4v16M6 14l6 6 6-6"/>
    </svg>
  </div>
</div>

<!-- SNSセクション -->
<section class="sns-section">
  <div class="sns-container">
    {{- range site.Params.socialIcons }}
    <a href="{{ .url }}" target="_blank" rel="noopener noreferrer" aria-label="{{ .name }}" class="sns-icon-large">
      {{- partial "svg.html" . }}
      <span class="sns-label">{{ .name }}</span>
    </a>
    {{- end }}
  </div>
</section>

<!-- 最新記事セクション -->
<section class="posts-section">
  <h2 class="posts-section-title">Latest Posts</h2>
  <div class="posts-container">
    {{- range first 3 (where site.RegularPages "Section" "posts") }}
    <a href="{{ .Permalink }}" class="post-card">
      <div class="post-card-content">
        <h3 class="post-card-title">{{ .Title }}</h3>
        <time class="post-card-date">{{ .Date.Format "2006.01.02" }}</time>
        {{- if .Description }}
        <p class="post-card-desc">{{ .Description }}</p>
        {{- end }}
      </div>
    </a>
    {{- end }}
  </div>
</section>

<script defer src="https://cdn.jsdelivr.net/npm/animejs@4.2.2/dist/bundles/anime.umd.min.js" integrity="sha256-fJxg0GGFLp1IKJtjme5cbEKb5wMzlUn2twiz5S16pz4=" crossorigin="anonymous"></script>
<script defer src="{{ "js/hero-animation.js" | relURL }}"></script>
{{ end }}
